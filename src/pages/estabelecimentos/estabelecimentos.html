<ion-header>
	<ion-toolbar>
		<ion-title>Estabelecimentos</ion-title>
		<ion-buttons end>
			<button ion-button icon-only (click)="showMenu($event)">
				<ion-icon name="more"></ion-icon>
			</button>
		</ion-buttons>
	</ion-toolbar>
</ion-header>
<ion-content>

	<ion-refresher (ionRefresh)="listEstabelecimentos($event)">
		<ion-refresher-content>
		</ion-refresher-content>
	</ion-refresher>

	<error-message [hidden]="!error" message="Falha ao carregar os estabelecimentos" (action)="listEstabelecimentos(undefined)"></error-message>
	<loading [hidden]="!loading"></loading>

	<ion-card *ngFor="let estabelecimento of estabelecimentos">

		<ion-item (click)="goToEstabelecimentoDetalhe(estabelecimento)">
			<h2>{{ estabelecimento.nome }}</h2>
			<p>{{ estabelecimento.cidade.nome }}</p>
		</ion-item>

		<img (click)="goToEstabelecimentoDetalhe(estabelecimento)" src="{{ estabelecimento.urlImage }}">

		<ion-card-content (click)="goToEstabelecimentoDetalhe(estabelecimento)">
			<p>{{ estabelecimento.descricao }}</p>
		</ion-card-content>

		<ion-buttons end>
			<button ion-button icon-left clear small (click)="goToEstabelecimentoDetalhe(estabelecimento)">
				<div>Gerenciar</div>
				<ion-icon name="share-alt"></ion-icon>
			</button>
		</ion-buttons>
	</ion-card>
</ion-content>